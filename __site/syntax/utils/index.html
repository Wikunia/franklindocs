<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/jtd.css"> <link rel=icon  href="/assets/infra/logoF_square.gif"> <title>Utils</title> <script src="/libs/lunr/lunr.min.js"></script> <script src="/libs/lunr/lunr_index.js"></script> <script src="/libs/lunr/lunrclient.min.js"></script> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/" class=title > <img style="height:60px;" src="/assets/infra/franklin.svg" alt=franklin  /> <style> @media (max-width: 31.25rem){ .side-bar .show-menu {height:30px;} } @media (max-width: 50rem) { .side-bar .header .title {padding-top:0; padding-bottom: 0;} .header .title img {height:60px; max-width: 100px !important;} } @media (min-width: 66.5rem){ .header .title img {max-width: 140px !important;} } </style> </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/" class=menu-list-link >• Home</a> <li class="menu-list-parent "><a href="/workflow/" class=menu-list-link >• Workflow</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/workflow/" class=menu-list-link >Create and edit</a> <li class="menu-list-item "><a href="/workflow/structure/" class=menu-list-link >Page structure</a> <li class="menu-list-item "><a href="/workflow/deploy/" class=menu-list-link >Deploy</a> </ul> <li class="menu-list-parent active"><a href="/syntax/markdown/" class=menu-list-link >• Syntax</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/syntax/markdown/" class=menu-list-link >Markdown</a> <li class="menu-list-item "><a href="/syntax/divs-commands/" class=menu-list-link >Divs and Commands</a> <li class="menu-list-item "><a href="/syntax/page-variables/" class=menu-list-link >Page Variables</a> <li class="menu-list-item active"><a href="/syntax/utils/" class=menu-list-link >Utils</a> </ul> <li class="menu-list-parent "><a href="/styling/templates/" class=menu-list-link >• Styling</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/styling/templates/" class=menu-list-link >Templates</a> <li class="menu-list-item "><a href="/styling/classes/" class=menu-list-link >Classes</a> </ul> <li class="menu-list-parent "><a href="/code/" class=menu-list-link >• Code</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/code/" class=menu-list-link >Inserting code</a> <li class="menu-list-item "><a href="/code/eval-tricks/" class=menu-list-link >Code tricks</a> <li class="menu-list-item "><a href="/code/literate/" class=menu-list-link >Literate.jl</a> </ul> <li class="menu-list-parent "><a href="/extras/" class=menu-list-link >• Extras</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/extras/" class=menu-list-link >Overview</a> <li class="menu-list-item "><a href="/extras/lunr/" class=menu-list-link >Lunr search</a> <li class="menu-list-item "><a href="/extras/literate/" class=menu-list-link >Literate</a> <li class="menu-list-item "><a href="/extras/plotly/" class=menu-list-link >Plotly</a> </ul> <li class="menu-list-parent "><a href="/faq/technical/" class=menu-list-link >• FAQ</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/faq/technical/" class=menu-list-link >Technical</a> <li class="menu-list-item "><a href="/faq/troubleshooting/" class=menu-list-link >Troubleshooting</a> <li class="menu-list-item "><a href="/faq/why-o-why/" class=menu-list-link >Meta</a> </ul> </ul> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text > <input type=submit  value=Search  formaction="/search/index.html"> </form> </div> <div class=footer > <a href="/faq/why-o-why/"><img style="width:40%;padding-left:10px;margin-bottom:15px;" src="/assets/infra/logoF2.svg" alt="Franklin Logo" /></a> </div> </div> <div class=main-content-wrap > <div class=main-content  id=focus  tabindex=-1  style="outline:0;"> <div class=main-header > <a name=pagetop ></a> <a id=github  href="https://github.com/tlienart/franklindocs/blob/master/syntax/utils.md">Page source</a> <span style="width:30px; text-align: center;color:lightgray;">|</span> <a id=github  href="https://github.com/tlienart/Franklin.jl">GitHub Repository</a> </div> <div class=franklin-content ><h1 id=utils ><a href="#utils">Utils</a></h1> <span style="font-size:24px;font-weight:300;">The `utils.jl` file allows you to create your own functions to custom Franklin.</span> <div class=blank ></div> <p>In general Franklin supports two types of functions which get called at different stages in the rendering process.</p> <div class=franklin-toc ><ol><li><a href="#hfun">hfun</a><li><a href="#lx">lx</a></ol></div> <h2 id=hfun ><a href="#hfun">hfun</a></h2> <code>hfun_</code> functions are called using <code>&#123;&#123; command &#125;&#125;</code> and return HTML code i.e this would call <code>hfun_command&#40;&#41;</code>. They can be used for various examples like listing the last posts on the main page.</p> <p>This could look like this:</p> <p>In <code>index.md</code>: <code>&#123;&#123; newest_posts &#125;&#125;</code> <p>In <code>utils.jl</code>:</p> <pre><code class=language-julia >function hfun_newest_posts()
    rpaths = String[]
    for file in keys(Franklin.ALL_PAGE_VARS)
        if startswith(file, "blog/")
            push!(rpaths, file)
        end
    end

    dates = Dates.Date[]
    for ref in rpaths
        push!(dates, pagevar(ref, "date"))
    end
    result = "&lt;div>"
    order = sortperm(dates; rev=true)
    for ref in rpaths[order]
        pos = findlast('/', ref)
        page_name = ref[1:pos-1]
        title = pagevar(ref, "title")
        desc = pagevar(ref, "desc")
        date = pagevar(ref, "date")
        str_date = Dates.format(date, "dd U YYYY")
        result *= "&lt;h3>&lt;u>&lt;a href='/$page_name'>$title&lt;/a>&lt;/u>&lt;/h3>"
        result *= "&lt;p class='post-list-desc'>$desc&lt;/p>"
    end
    result *= "&lt;/div>"
    return result
end</code></pre> <p>This creates a list of pages ordered by the page variable <code>date</code> and also shows the description of each post.</p> <ul> <li><p><code>ALL_PAGE_VARS</code> stores all pages and their variables </p> <ul> <li><p>the keys look like <code>folder_path/index</code> if you have the structure <code>folder_path/index.md</code> for your posts</p> </ul> <li><p><code>pagevar</code> takes two arguments: path of the page and the variable </p> </ul> <code>hfun</code> functions can take arguments with:</p> <code>&#123;&#123; newest_posts ARG1 ARG2&#125;&#125;</code> which could be used to define the sorting for example. This would call <code>hfun_newest_posts&#40;ARG1, ARG2&#41;</code>.</p> <h2 id=lx ><a href="#lx">lx</a></h2> <code>lx</code> functions can be used if one wants to return markdown code instead of <code>html</code>.</p> <p>Currently they take only one argument which needs to be parsed in each function. A simple example is to define <code>lx_figclick</code> which should provide the same functionality as <code>figalt</code> but is a clickable image to view it in its full size.</p> <p>These functions are written with the \(\LaTeX\) like syntax: <code>\figclick&#123;Arg&#125;</code>.</p> <p>In the example case it would look like <code>\figclick&#123;alt, path&#125;</code> and the function called:</p> <pre><code class=language-julia >html_img_click(src, alt) = "[![$(Franklin.htmlesc(alt))]($src)]($src)"

function lx_figclick(lx, _)
    # keep this first line
    brace_content = Franklin.content(lx.braces[1]) # input string
    alt, rpath = strip.(split(brace_content, ','))
    path  = Franklin.parse_rpath(rpath; canonical=false, code=true)
    return html_img_click(path, alt)
end</code></pre><div class=page-foot > <div class=copyright > &copy; Thibaut Lienart. Last modified: June 14, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>. </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap--> <script src="/libs/katex/katex.min.js"></script> <script src="/libs/katex/auto-render.min.js"></script> <script>renderMathInElement(document.body)</script> <script src="/libs/highlight/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: ' '});</script>